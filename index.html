<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload File - Branch 1, Semester 1</title>
</head>
<body>
    <h1>Upload File - Branch 1, Semester 1</h1>
    <button id="google-signin-button">Sign in with Google</button>
    
    <div id="upload-section" style="display:none;">
        <input type="file" id="file-input">
        <button onclick="uploadFile()">Upload File</button>
    </div>
    
    <script>
        const clientId = 'YOUR_CLIENT_ID'; // Replace with your Google Client ID
        const redirectUri = 'https://pdastudents.github.io/Academic-Resources/branch1/sem1/upload.html';
        const oauthUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=code&scope=email profile&access_type=offline`;

        document.getElementById('google-signin-button').onclick = function() {
            window.location.href = oauthUrl;
        };

        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');

        if (code) {
            // Display the upload section if the user is authenticated
            document.getElementById('upload-section').style.display = 'block';
            document.getElementById('google-signin-button').style.display = 'none';

            // Exchange the authorization code for an access token (Example only, actual implementation will require server-side code)
            // fetch('https://oauth2.googleapis.com/token', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/x-www-form-urlencoded'
            //     },
            //     body: `code=${code}&client_id=${clientId}&client_secret=YOUR_CLIENT_SECRET&redirect_uri=${redirectUri}&grant_type=authorization_code`
            // }).then(response => response.json())
            //   .then(data => {
            //       console.log('Access Token:', data.access_token);
            //       // Use the access token to authorize the file upload
            //   });
        }

        function uploadFile() {
            const file = document.getElementById('file-input').files[0];
            if (!file) {
                alert("Please select a file to upload");
                return;
            }

            // Handle the file upload (this is just a placeholder, actual implementation will vary)
            console.log('Uploading file:', file.name);
            alert("File uploaded successfully!");
        }
    </script>
</body>
</html>
